<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline' https://script.google.com https://script.googleusercontent.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:; media-src 'self'; connect-src 'self' https://script.google.com https://script.googleusercontent.com; frame-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self' https://script.google.com https://script.googleusercontent.com; upgrade-insecure-requests;"
    />
    <meta name="description" content="RSVP for Christopher & Lorraine's Wedding - September 12, 2026" />
    <title>RSVP</title>
    <link rel="icon" href="assets/images/favicon.png" type="image/png" />

    <link rel="stylesheet" href="assets/css/main.css" />
    <style>
      /* Local styles for the invite-help block */
      .invite-help {
        margin-top: 0.75rem;
      }
      .invite-help details {
        border-left: 3px solid rgba(0,0,0,0.06);
        padding-left: 0.75rem;
        background: rgba(0,0,0,0.01);
        border-radius: 4px;
      }
      .invite-help summary {
        cursor: pointer;
        font-weight: 600;
        list-style: none;
      }
      .invite-help img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0.5rem 0;
        border-radius: 4px;
      }
      .invite-help figure {
        margin: 0.5rem 0 1rem 0;
      }
      .invite-help figcaption {
        font-size: 0.9rem;
        color: #555;
      }
    </style>
  </head>
  <body class="allow-scroll">
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- ── Sticky Header & Nav ── -->
    <div id="site-header"></div>

    <!-- ── Content Card ── -->
    <main id="main-content" class="content-container">
      <h1>RSVP</h1>
      <div class="card intro-card" id="rsvpCard">
        <div id="step-code">
          <form id="code-form" novalidate>
            <label for="code-input"
              >Enter the "Invite Code" you received with your invitation:</label
            >
            <p class="code-help" id="code-help">
              <small
                ><em
                  >Your invite code can be found on the back of the box your
                  invitation was in.</em
                ></small
              >
            </p>
            <input
              type="text"
              id="code-input"
              required
              pattern="[A-Za-z0-9-]{3,20}"
              autocomplete="off"
              maxlength="20"
              minlength="3"
              title="Enter your invite code (3-20 characters, letters, numbers, and hyphens only)"
              aria-describedby="code-help"
            />
            <button id="code-submit" type="submit">Submit</button>
          </form>

          <!-- Inline expandable help for locating the invite code -->
          <div class="invite-help" aria-hidden="false">
            <details>
              <summary id="invite-code-help-summary">Where do I find my invite code?</summary>
              <p>
                The invite code is printed on the back of the box the invitation was recieved in. 
                If you are unable to find please reach out to Lorraine or Chris.
              </p>

              <figure>
                <img src="assets/images/IMG_2405.jpeg" alt="Back of invitation showing where invite code is printed">
                <figcaption>Please look at the bottom left corner of your invitation box.</figcaption>
              </figure>

              <figure>
                <img src="assets/images/IMG_2402.jpeg" alt="Close-up of invite card showing the invite code">
                <figcaption>For reference, this is the front of the box.</figcaption>
              </figure>
            </details>
          </div>

          <div
            id="code-status"
            class="hidden"
            role="status"
            aria-live="polite"
            hidden
          ></div>
          <div id="code-error" class="error hidden" role="alert" hidden>
            Incorrect code. Please try again.
          </div>
        </div>

        <div id="step-attending" class="hidden" hidden>
          <p id="welcome-message" class="hidden" hidden></p>
          <p id="party-name-message"></p>
          <div class="rsvp-choice">
            <button type="button" id="party-yes">Yes</button>
            <button type="button" id="party-no">No</button>
          </div>
        </div>

        <form id="step-guests" class="hidden" novalidate hidden>
          <div class="name-edit-controls">
            <button
              type="button"
              id="name-edit-toggle"
              class="name-edit-toggle"
              aria-pressed="false"
              aria-controls="guest-cards"
            >
              Edit names
            </button>
            <p id="name-edit-note" class="hidden" hidden>
              Use this to correct spelling only. Contact Chris or Lorraine for any
              other changes.
            </p>
          </div>
          <div id="guest-cards"></div>
          <div id="meal-error" class="error hidden" role="alert" hidden></div>
          <button type="submit">Submit RSVP</button>
        </form>

        <div
          id="final-message"
          class="hidden"
          role="status"
          aria-live="polite"
          hidden
        ></div>
      </div>
    </main>

    <!-- site-wide behaviors -->
    <script src="assets/js/header.js"></script>
    <script src="assets/js/script.js"></script>
    <script src="assets/js/rsvp.js"></script>
  </body>
</html>
